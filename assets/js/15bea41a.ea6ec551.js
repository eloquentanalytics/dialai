"use strict";(globalThis.webpackChunkdialai_website=globalThis.webpackChunkdialai_website||[]).push([[5907],{2893(e,s,n){n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"concepts/sessions","title":"Sessions","description":"A session is an instance of a state machine that specialists navigate through decision cycles.","source":"@site/docs/concepts/sessions.md","sourceDirName":"concepts","slug":"/concepts/sessions","permalink":"/dialai/docs/concepts/sessions","draft":false,"unlisted":false,"editUrl":"https://github.com/eloquentanalytics/dialai/tree/main/website/docs/concepts/sessions.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Core Concepts","permalink":"/dialai/docs/concepts/intro"},"next":{"title":"Specialists","permalink":"/dialai/docs/concepts/specialists"}}');var t=n(4848),r=n(8453);const c={sidebar_position:2},o="Sessions",a={},d=[{value:"What Is a Session?",id:"what-is-a-session",level:2},{value:"Session Lifecycle",id:"session-lifecycle",level:2},{value:"1. Creation",id:"1-creation",level:3},{value:"2. Progression",id:"2-progression",level:3},{value:"3. Completion",id:"3-completion",level:3},{value:"Machine Definition",id:"machine-definition",level:2},{value:"Fields",id:"fields",level:3},{value:"State Configuration",id:"state-configuration",level:3},{value:"Decision Prompts",id:"decision-prompts",level:3},{value:"Querying Sessions",id:"querying-sessions",level:2},{value:"Session Types",id:"session-types",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Design Clear Default States",id:"1-design-clear-default-states",level:3},{value:"2. Use Descriptive Decision Prompts",id:"2-use-descriptive-decision-prompts",level:3},{value:"3. Name Transitions Clearly",id:"3-name-transitions-clearly",level:3},{value:"Next Steps",id:"next-steps",level:2}];function l(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"sessions",children:"Sessions"})}),"\n",(0,t.jsxs)(s.p,{children:["A ",(0,t.jsx)(s.strong,{children:"session"})," is an instance of a state machine that specialists navigate through decision cycles."]}),"\n",(0,t.jsx)(s.h2,{id:"what-is-a-session",children:"What Is a Session?"}),"\n",(0,t.jsx)(s.p,{children:"A session has:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["A ",(0,t.jsx)(s.strong,{children:"machine definition"}),": the blueprint defining possible states and transitions"]}),"\n",(0,t.jsxs)(s.li,{children:["A ",(0,t.jsx)(s.strong,{children:"current state"}),": where the session is right now"]}),"\n",(0,t.jsxs)(s.li,{children:["A ",(0,t.jsx)(s.strong,{children:"session ID"}),": a unique UUID generated at creation"]}),"\n",(0,t.jsxs)(s.li,{children:["A ",(0,t.jsx)(s.strong,{children:"creation timestamp"}),": when the session was started"]}),"\n"]}),"\n",(0,t.jsx)(s.mermaid,{value:"graph LR\n    subgraph Session\n        D[Machine Definition]\n        C[Current State]\n        I[Session ID]\n        T[Created At]\n    end"}),"\n",(0,t.jsx)(s.h2,{id:"session-lifecycle",children:"Session Lifecycle"}),"\n",(0,t.jsx)(s.h3,{id:"1-creation",children:"1. Creation"}),"\n",(0,t.jsxs)(s.p,{children:["A session starts with the ",(0,t.jsx)(s.code,{children:"createSession"})," function:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:'import { createSession } from "dialai";\nimport type { MachineDefinition } from "dialai";\n\nconst machine: MachineDefinition = {\n  machineName: "document-review",\n  initialState: "pending",\n  defaultState: "approved",\n  states: {\n    pending: {\n      prompt: "Review the document and decide: approve or request changes.",\n      transitions: {\n        approve: "approved",\n        request_changes: "needs_revision",\n      },\n    },\n    needs_revision: {\n      prompt: "Review the revised document. Has the author addressed the feedback?",\n      transitions: {\n        approve: "approved",\n        request_more_changes: "needs_revision",\n      },\n    },\n    approved: {},\n  },\n};\n\nconst session = createSession(machine);\n// session.sessionId     \u2192 "a1b2c3d4-..."\n// session.currentState  \u2192 "pending"\n// session.createdAt     \u2192 Date\n'})}),"\n",(0,t.jsxs)(s.p,{children:["The session is created in its ",(0,t.jsx)(s.code,{children:"initialState"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"2-progression",children:"2. Progression"}),"\n",(0,t.jsxs)(s.p,{children:["When a session is ",(0,t.jsx)(s.strong,{children:"not in its default state"}),", the decision cycle activates:"]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Specialists propose transitions"}),"\n",(0,t.jsx)(s.li,{children:"Proposals are compared through voting (if 2+)"}),"\n",(0,t.jsx)(s.li,{children:"Consensus is evaluated"}),"\n",(0,t.jsx)(s.li,{children:"The winning transition executes"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"3-completion",children:"3. Completion"}),"\n",(0,t.jsxs)(s.p,{children:['A session is "complete" when it reaches its ',(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"defaultState"})}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"machine-definition",children:"Machine Definition"}),"\n",(0,t.jsxs)(s.p,{children:["Each session has a ",(0,t.jsx)(s.code,{children:"MachineDefinition"})," that defines its structure:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:"interface MachineDefinition {\n  machineName: string;\n  initialState: string;\n  defaultState: string;\n  states: Record<string, {\n    prompt?: string;\n    transitions?: Record<string, string>;\n  }>;\n}\n"})}),"\n",(0,t.jsx)(s.h3,{id:"fields",children:"Fields"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Field"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"machineName"})}),(0,t.jsxs)(s.td,{children:["Identifies the type of session (e.g., ",(0,t.jsx)(s.code,{children:'"document-review"'}),")"]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"initialState"})}),(0,t.jsx)(s.td,{children:"The state a session starts in"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"defaultState"})}),(0,t.jsx)(s.td,{children:"The goal state; session is complete when it reaches this"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"states"})}),(0,t.jsx)(s.td,{children:"A record of state names to their configuration"})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"state-configuration",children:"State Configuration"}),"\n",(0,t.jsx)(s.p,{children:"Each state can have:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"prompt"})}),": A description of the decision to be made in this state. Given to specialists to guide their proposals."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:(0,t.jsx)(s.code,{children:"transitions"})}),": A map of transition names to target states. If omitted, the state is terminal (no outgoing transitions)."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"decision-prompts",children:"Decision Prompts"}),"\n",(0,t.jsxs)(s.p,{children:["Each state's ",(0,t.jsx)(s.code,{children:"prompt"})," describes the decision to be made. This prompt is:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Given to all specialists (AI and human)"}),"\n",(0,t.jsx)(s.li,{children:"Specialist-agnostic (same instructions for everyone)"}),"\n",(0,t.jsx)(s.li,{children:"The source of truth for how to decide"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"querying-sessions",children:"Querying Sessions"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:'import { getSession, getSessions } from "dialai";\n\n// Get a specific session by ID\nconst session = getSession("a1b2c3d4-...");\n\n// Get all sessions\nconst allSessions = getSessions();\n'})}),"\n",(0,t.jsx)(s.h2,{id:"session-types",children:"Session Types"}),"\n",(0,t.jsxs)(s.p,{children:["A ",(0,t.jsx)(s.strong,{children:"session type"})," identifies which kind of machine is being run:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:'machineName: "document-review"\nmachineName: "code-review"\nmachineName: "support-ticket"\n'})}),"\n",(0,t.jsx)(s.p,{children:"Different session types have:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Different machine definitions"}),"\n",(0,t.jsx)(s.li,{children:"Different registered specialists"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(s.h3,{id:"1-design-clear-default-states",children:"1. Design Clear Default States"}),"\n",(0,t.jsx)(s.p,{children:'The default state should represent "done" or "stable":'}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"approved"}),", ",(0,t.jsx)(s.code,{children:"completed"}),", ",(0,t.jsx)(s.code,{children:"resolved"})]}),"\n",(0,t.jsxs)(s.li,{children:["Not ",(0,t.jsx)(s.code,{children:"processing"}),", ",(0,t.jsx)(s.code,{children:"in_progress"}),", ",(0,t.jsx)(s.code,{children:"waiting"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"2-use-descriptive-decision-prompts",children:"2. Use Descriptive Decision Prompts"}),"\n",(0,t.jsx)(s.p,{children:"Good prompts are specific and actionable:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:'"Review the code changes. Check for: 1) correctness, 2) test coverage,\n 3) documentation. Approve if all criteria met, otherwise request changes."\n\nNot: "Decide what to do next."\n'})}),"\n",(0,t.jsx)(s.h3,{id:"3-name-transitions-clearly",children:"3. Name Transitions Clearly"}),"\n",(0,t.jsx)(s.p,{children:"Transition names should describe the action being taken:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-typescript",children:'transitions: {\n  approve: "approved",        // Clear action\n  request_changes: "needs_revision",\n  reject: "rejected",\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/dialai/docs/concepts/specialists",children:"Specialists"}),": Learn about the actors that navigate sessions"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"/dialai/docs/concepts/decision-cycle",children:"Decision Cycle"}),": Understand how decisions are made"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453(e,s,n){n.d(s,{R:()=>c,x:()=>o});var i=n(6540);const t={},r=i.createContext(t);function c(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);