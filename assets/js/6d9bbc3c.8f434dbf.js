"use strict";(globalThis.webpackChunkdialai_website=globalThis.webpackChunkdialai_website||[]).push([[5831],{3392(e,t,s){s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>i,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"guides/implementing-strategies","title":"Implementing Strategies","description":"Strategies are functions that define how specialists make decisions. Each specialist is registered with a strategy function that gets called during the decision cycle.","source":"@site/docs/guides/implementing-strategies.md","sourceDirName":"guides","slug":"/guides/implementing-strategies","permalink":"/dialai/docs/guides/implementing-strategies","draft":false,"unlisted":false,"editUrl":"https://github.com/eloquentanalytics/dialai/tree/main/website/docs/guides/implementing-strategies.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Registering Specialists","permalink":"/dialai/docs/guides/registering-specialists"},"next":{"title":"API Reference","permalink":"/dialai/docs/api/intro"}}');var n=s(4848),a=s(8453);const i={sidebar_position:3},o="Implementing Strategies",l={},p=[{value:"Proposer Strategy",id:"proposer-strategy",level:2},{value:"ProposerStrategy Type",id:"proposerstrategy-type",level:3},{value:"Example: Pick the First Transition",id:"example-pick-the-first-transition",level:3},{value:"Example: Goal-Directed Proposer",id:"example-goal-directed-proposer",level:3},{value:"Voter Strategy",id:"voter-strategy",level:2},{value:"VoterStrategy Type",id:"voterstrategy-type",level:3},{value:"Example: Prefer Goal-Reaching Proposals",id:"example-prefer-goal-reaching-proposals",level:3},{value:"Using Strategies with Specialists",id:"using-strategies-with-specialists",level:2},{value:"Direct Submission",id:"direct-submission",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"implementing-strategies",children:"Implementing Strategies"})}),"\n",(0,n.jsx)(t.p,{children:"Strategies are functions that define how specialists make decisions. Each specialist is registered with a strategy function that gets called during the decision cycle."}),"\n",(0,n.jsx)(t.h2,{id:"proposer-strategy",children:"Proposer Strategy"}),"\n",(0,n.jsx)(t.p,{children:"A proposer strategy receives the current state name and available transitions, and returns a transition choice:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:'import type { ProposerStrategy } from "dialai";\n\nconst myProposer: ProposerStrategy = (currentState, transitions) => {\n  // currentState: string \u2014 the session\'s current state name\n  // transitions: Record<string, string> \u2014 maps transition name \u2192 target state\n\n  // Your logic here: call an LLM, apply rules, etc.\n\n  return {\n    transitionName: "complete",\n    toState: "done",\n    reasoning: "Task is ready to be completed",\n  };\n};\n'})}),"\n",(0,n.jsx)(t.h3,{id:"proposerstrategy-type",children:"ProposerStrategy Type"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"type ProposerStrategy = (\n  currentState: string,\n  transitions: Record<string, string>\n) => {\n  transitionName: string;\n  toState: string;\n  reasoning: string;\n};\n"})}),"\n",(0,n.jsx)(t.h3,{id:"example-pick-the-first-transition",children:"Example: Pick the First Transition"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:'const firstTransition: ProposerStrategy = (_currentState, transitions) => {\n  const name = Object.keys(transitions)[0];\n  return {\n    transitionName: name,\n    toState: transitions[name],\n    reasoning: "First available transition",\n  };\n};\n'})}),"\n",(0,n.jsx)(t.h3,{id:"example-goal-directed-proposer",children:"Example: Goal-Directed Proposer"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:'const goalDirected: ProposerStrategy = (_currentState, transitions) => {\n  // Prefer transitions that lead to the goal state\n  for (const [name, target] of Object.entries(transitions)) {\n    if (target === "done" || target === "approved" || target === "completed") {\n      return {\n        transitionName: name,\n        toState: target,\n        reasoning: `Transition "${name}" leads directly to goal state "${target}"`,\n      };\n    }\n  }\n  // Fallback to first transition\n  const name = Object.keys(transitions)[0];\n  return {\n    transitionName: name,\n    toState: transitions[name],\n    reasoning: "No direct path to goal; taking first available transition",\n  };\n};\n'})}),"\n",(0,n.jsx)(t.h2,{id:"voter-strategy",children:"Voter Strategy"}),"\n",(0,n.jsx)(t.p,{children:"A voter strategy compares two proposals and returns a preference:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:'import type { VoterStrategy } from "dialai";\n\nconst myVoter: VoterStrategy = (proposalA, proposalB) => {\n  // proposalA, proposalB: Proposal objects with:\n  //   proposalId, sessionId, specialistId, transitionName, toState, reasoning\n\n  // Your logic to compare proposals\n\n  return {\n    voteFor: "A", // "A" | "B" | "BOTH" | "NEITHER"\n    reasoning: "Proposal A better aligns with the decision criteria",\n  };\n};\n'})}),"\n",(0,n.jsx)(t.h3,{id:"voterstrategy-type",children:"VoterStrategy Type"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:'type VoterStrategy = (\n  proposalA: Proposal,\n  proposalB: Proposal\n) => {\n  voteFor: VoteChoice; // "A" | "B" | "BOTH" | "NEITHER"\n  reasoning: string;\n};\n'})}),"\n",(0,n.jsx)(t.h3,{id:"example-prefer-goal-reaching-proposals",children:"Example: Prefer Goal-Reaching Proposals"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:'const goalVoter: VoterStrategy = (proposalA, proposalB) => {\n  const aReachesGoal = proposalA.toState === "done";\n  const bReachesGoal = proposalB.toState === "done";\n\n  if (aReachesGoal && !bReachesGoal) {\n    return { voteFor: "A", reasoning: "Proposal A reaches the goal state" };\n  }\n  if (bReachesGoal && !aReachesGoal) {\n    return { voteFor: "B", reasoning: "Proposal B reaches the goal state" };\n  }\n  if (aReachesGoal && bReachesGoal) {\n    return { voteFor: "BOTH", reasoning: "Both proposals reach the goal" };\n  }\n  return { voteFor: "NEITHER", reasoning: "Neither proposal reaches the goal" };\n};\n'})}),"\n",(0,n.jsx)(t.h2,{id:"using-strategies-with-specialists",children:"Using Strategies with Specialists"}),"\n",(0,n.jsx)(t.p,{children:"Register strategies when creating specialists:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:'import { registerSpecialist } from "dialai";\n\nregisterSpecialist({\n  specialistId: "goal-proposer",\n  sessionTypeName: "my-task",\n  role: "proposer",\n  strategy: goalDirected,\n});\n\nregisterSpecialist({\n  specialistId: "goal-voter",\n  sessionTypeName: "my-task",\n  role: "voter",\n  strategy: goalVoter,\n});\n'})}),"\n",(0,n.jsx)(t.h2,{id:"direct-submission",children:"Direct Submission"}),"\n",(0,n.jsx)(t.p,{children:"You can also bypass strategies and submit proposals or votes directly:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:'import { submitProposal, submitVote } from "dialai";\n\n// Submit a proposal without a registered strategy\nconst proposal = submitProposal(\n  sessionId,\n  "manual-proposer",\n  "approve",\n  "approved",\n  "Manually approved after review"\n);\n\n// Submit a vote directly\nconst vote = submitVote(\n  sessionId,\n  "manual-voter",\n  proposalA.proposalId,\n  proposalB.proposalId,\n  "A",\n  "Prefer proposal A"\n);\n'})})]})}function g(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}}}]);