"use strict";(globalThis.webpackChunkdialai_website=globalThis.webpackChunkdialai_website||[]).push([[4656],{4624(s,e,i){i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"api/intro","title":"API Reference","description":"The DialAI API provides 10 functions for creating sessions, registering specialists, and managing the decision cycle. All functions are synchronous and use in-memory storage.","source":"@site/docs/api/intro.md","sourceDirName":"api","slug":"/api/intro","permalink":"/dialai/docs/api/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/eloquentanalytics/dialai/tree/main/website/docs/api/intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Implementing Strategies","permalink":"/dialai/docs/guides/implementing-strategies"},"next":{"title":"Examples","permalink":"/dialai/docs/examples/intro"}}');var o=i(4848),t=i(8453);const a={sidebar_position:1},r="API Reference",l={},c=[{value:"Session Functions",id:"session-functions",level:2},{value:"<code>createSession(machine: MachineDefinition): Session</code>",id:"createsessionmachine-machinedefinition-session",level:3},{value:"<code>getSession(sessionId: string): Session</code>",id:"getsessionsessionid-string-session",level:3},{value:"<code>getSessions(): Session[]</code>",id:"getsessions-session",level:3},{value:"Specialist Functions",id:"specialist-functions",level:2},{value:"<code>registerSpecialist(opts): Specialist</code>",id:"registerspecialistopts-specialist",level:3},{value:"Proposal Functions",id:"proposal-functions",level:2},{value:"<code>submitProposal(sessionId, specialistId, transitionName, toState, reasoning?): Proposal</code>",id:"submitproposalsessionid-specialistid-transitionname-tostate-reasoning-proposal",level:3},{value:"<code>solicitProposal(sessionId, specialistId): Proposal</code>",id:"solicitproposalsessionid-specialistid-proposal",level:3},{value:"Vote Functions",id:"vote-functions",level:2},{value:"<code>submitVote(sessionId, specialistId, proposalIdA, proposalIdB, voteFor, reasoning?): Vote</code>",id:"submitvotesessionid-specialistid-proposalida-proposalidb-votefor-reasoning-vote",level:3},{value:"<code>solicitVote(sessionId, specialistId, proposalIdA, proposalIdB): Vote</code>",id:"solicitvotesessionid-specialistid-proposalida-proposalidb-vote",level:3},{value:"Consensus &amp; Execution",id:"consensus--execution",level:2},{value:"<code>evaluateConsensus(sessionId: string): ConsensusResult</code>",id:"evaluateconsensussessionid-string-consensusresult",level:3},{value:"<code>executeTransition(sessionId, transitionName, toState, reasoning?): Session</code>",id:"executetransitionsessionid-transitionname-tostate-reasoning-session",level:3},{value:"Engine",id:"engine",level:2},{value:"<code>runSession(machine: MachineDefinition): Session</code>",id:"runsessionmachine-machinedefinition-session",level:3},{value:"Types",id:"types",level:2},{value:"Store",id:"store",level:2}];function d(s){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...s.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"api-reference",children:"API Reference"})}),"\n",(0,o.jsx)(e.p,{children:"The DialAI API provides 10 functions for creating sessions, registering specialists, and managing the decision cycle. All functions are synchronous and use in-memory storage."}),"\n",(0,o.jsx)(e.h2,{id:"session-functions",children:"Session Functions"}),"\n",(0,o.jsx)(e.h3,{id:"createsessionmachine-machinedefinition-session",children:(0,o.jsx)(e.code,{children:"createSession(machine: MachineDefinition): Session"})}),"\n",(0,o.jsxs)(e.p,{children:["Creates a new session instance. Generates a UUID, sets ",(0,o.jsx)(e.code,{children:"currentState"})," to ",(0,o.jsx)(e.code,{children:"machine.initialState"}),", and stores the session."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { createSession } from "dialai";\n\nconst session = createSession(machine);\n'})}),"\n",(0,o.jsx)(e.h3,{id:"getsessionsessionid-string-session",children:(0,o.jsx)(e.code,{children:"getSession(sessionId: string): Session"})}),"\n",(0,o.jsx)(e.p,{children:"Retrieves a session by ID. Throws if not found."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { getSession } from "dialai";\n\nconst session = getSession("a1b2c3d4-...");\n'})}),"\n",(0,o.jsx)(e.h3,{id:"getsessions-session",children:(0,o.jsx)(e.code,{children:"getSessions(): Session[]"})}),"\n",(0,o.jsx)(e.p,{children:"Returns all stored sessions."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { getSessions } from "dialai";\n\nconst all = getSessions();\n'})}),"\n",(0,o.jsx)(e.h2,{id:"specialist-functions",children:"Specialist Functions"}),"\n",(0,o.jsx)(e.h3,{id:"registerspecialistopts-specialist",children:(0,o.jsx)(e.code,{children:"registerSpecialist(opts): Specialist"})}),"\n",(0,o.jsx)(e.p,{children:"Registers a specialist for a session type. Default weight is 1.0."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { registerSpecialist } from "dialai";\n\nconst specialist = registerSpecialist({\n  specialistId: "ai-proposer-1",\n  sessionTypeName: "my-task",\n  role: "proposer",\n  weight: 1.0, // optional, defaults to 1.0\n  strategy: (currentState, transitions) => ({\n    transitionName: Object.keys(transitions)[0],\n    toState: Object.values(transitions)[0],\n    reasoning: "First available",\n  }),\n});\n'})}),"\n",(0,o.jsx)(e.h2,{id:"proposal-functions",children:"Proposal Functions"}),"\n",(0,o.jsx)(e.h3,{id:"submitproposalsessionid-specialistid-transitionname-tostate-reasoning-proposal",children:(0,o.jsx)(e.code,{children:"submitProposal(sessionId, specialistId, transitionName, toState, reasoning?): Proposal"})}),"\n",(0,o.jsx)(e.p,{children:"Creates and stores a proposal with a generated UUID."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { submitProposal } from "dialai";\n\nconst proposal = submitProposal(\n  session.sessionId,\n  "ai-proposer-1",\n  "approve",\n  "approved",\n  "Document meets standards"\n);\n'})}),"\n",(0,o.jsx)(e.h3,{id:"solicitproposalsessionid-specialistid-proposal",children:(0,o.jsx)(e.code,{children:"solicitProposal(sessionId, specialistId): Proposal"})}),"\n",(0,o.jsx)(e.p,{children:"Calls the specialist's strategy function with the session's current state and transitions, then submits the resulting proposal."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { solicitProposal } from "dialai";\n\nconst proposal = solicitProposal(session.sessionId, "ai-proposer-1");\n'})}),"\n",(0,o.jsx)(e.h2,{id:"vote-functions",children:"Vote Functions"}),"\n",(0,o.jsx)(e.h3,{id:"submitvotesessionid-specialistid-proposalida-proposalidb-votefor-reasoning-vote",children:(0,o.jsx)(e.code,{children:"submitVote(sessionId, specialistId, proposalIdA, proposalIdB, voteFor, reasoning?): Vote"})}),"\n",(0,o.jsx)(e.p,{children:"Creates and stores a vote with a generated UUID."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { submitVote } from "dialai";\n\nconst vote = submitVote(\n  session.sessionId,\n  "ai-voter-1",\n  proposalA.proposalId,\n  proposalB.proposalId,\n  "A",\n  "Proposal A is better aligned"\n);\n'})}),"\n",(0,o.jsx)(e.h3,{id:"solicitvotesessionid-specialistid-proposalida-proposalidb-vote",children:(0,o.jsx)(e.code,{children:"solicitVote(sessionId, specialistId, proposalIdA, proposalIdB): Vote"})}),"\n",(0,o.jsx)(e.p,{children:"Calls the specialist's strategy function with the two proposals, then submits the resulting vote."}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { solicitVote } from "dialai";\n\nconst vote = solicitVote(\n  session.sessionId,\n  "ai-voter-1",\n  proposalA.proposalId,\n  proposalB.proposalId\n);\n'})}),"\n",(0,o.jsx)(e.h2,{id:"consensus--execution",children:"Consensus & Execution"}),"\n",(0,o.jsx)(e.h3,{id:"evaluateconsensussessionid-string-consensusresult",children:(0,o.jsx)(e.code,{children:"evaluateConsensus(sessionId: string): ConsensusResult"})}),"\n",(0,o.jsx)(e.p,{children:"Evaluates consensus for all proposals and votes in the session:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"0 proposals"})," \u2014 ",(0,o.jsx)(e.code,{children:"{ consensusReached: false }"})]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"1 proposal"})," \u2014 ",(0,o.jsx)(e.code,{children:"{ consensusReached: true, winningProposalId: ... }"})]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"2+ proposals"})," \u2014 Human votes override; otherwise weighted ahead-by-k (k=1.0)"]}),"\n"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { evaluateConsensus } from "dialai";\n\nconst result = evaluateConsensus(session.sessionId);\nif (result.consensusReached) {\n  console.log("Winner:", result.winningProposalId);\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"executetransitionsessionid-transitionname-tostate-reasoning-session",children:(0,o.jsx)(e.code,{children:"executeTransition(sessionId, transitionName, toState, reasoning?): Session"})}),"\n",(0,o.jsxs)(e.p,{children:["Validates the transition from the current state, records it in ",(0,o.jsx)(e.code,{children:"session.history"})," with the given ",(0,o.jsx)(e.code,{children:"reasoning"}),", updates ",(0,o.jsx)(e.code,{children:"currentState"}),", and clears all proposals and votes for the session."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { executeTransition } from "dialai";\n\nconst updated = executeTransition(\n  session.sessionId,\n  "approve",\n  "approved",\n  consensus.reasoning\n);\nconsole.log(updated.currentState); // "approved"\nconsole.log(updated.history);      // [{ fromState: "review", toState: "approved", reasoning: "...", ... }]\n'})}),"\n",(0,o.jsx)(e.h2,{id:"engine",children:"Engine"}),"\n",(0,o.jsx)(e.h3,{id:"runsessionmachine-machinedefinition-session",children:(0,o.jsx)(e.code,{children:"runSession(machine: MachineDefinition): Session"})}),"\n",(0,o.jsxs)(e.p,{children:["Runs a machine to completion. Creates a session, registers a built-in deterministic proposer, and loops through the decision cycle until ",(0,o.jsx)(e.code,{children:"currentState === defaultState"}),"."]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { runSession } from "dialai";\n\nconst session = runSession(machine);\n'})}),"\n",(0,o.jsx)(e.h2,{id:"types",children:"Types"}),"\n",(0,o.jsx)(e.p,{children:"All types are exported from the main package:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import type {\n  MachineDefinition,\n  Session,\n  Specialist,\n  Proposal,\n  Vote,\n  ConsensusResult,\n  ProposerStrategy,\n  VoterStrategy,\n  VoteChoice,\n} from "dialai";\n'})}),"\n",(0,o.jsx)(e.h2,{id:"store",children:"Store"}),"\n",(0,o.jsx)(e.p,{children:"The in-memory store is also exported for advanced use and testing:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import { sessions, specialists, proposals, votes, clear } from "dialai";\n\n// clear() resets all maps \u2014 useful for test isolation\nclear();\n'})})]})}function p(s={}){const{wrapper:e}={...(0,t.R)(),...s.components};return e?(0,o.jsx)(e,{...s,children:(0,o.jsx)(d,{...s})}):d(s)}}}]);