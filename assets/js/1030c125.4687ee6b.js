"use strict";(globalThis.webpackChunkdialai_website=globalThis.webpackChunkdialai_website||[]).push([[706],{865(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"guides/skills/programmatic-usage/SKILL","title":"Programmatic Usage","description":"Use DIAL programmatically in TypeScript/JavaScript. Use when integrating DIAL into your own code.","source":"@site/docs/guides/skills/programmatic-usage/SKILL.md","sourceDirName":"guides/skills/programmatic-usage","slug":"/guides/skills/programmatic-usage/SKILL","permalink":"/dialai/docs/guides/skills/programmatic-usage/SKILL","draft":false,"unlisted":false,"editUrl":"https://github.com/eloquentanalytics/dialai/tree/main/website/docs/guides/skills/programmatic-usage/SKILL.md","tags":[],"version":"current","frontMatter":{"name":"dial-programmatic-usage","description":"Use DIAL programmatically in TypeScript/JavaScript. Use when integrating DIAL into your own code."}}');var t=s(4848),r=s(8453);const o={name:"dial-programmatic-usage",description:"Use DIAL programmatically in TypeScript/JavaScript. Use when integrating DIAL into your own code."},a="Programmatic Usage",c={},l=[{value:"Installation",id:"installation",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Core Functions",id:"core-functions",level:2},{value:"Full Example",id:"full-example",level:2},{value:"Inspecting Sessions",id:"inspecting-sessions",level:2},{value:"Accessing History",id:"accessing-history",level:2},{value:"Custom Strategies",id:"custom-strategies",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"TypeScript Types",id:"typescript-types",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"programmatic-usage",children:"Programmatic Usage"})}),"\n",(0,t.jsx)(n.p,{children:"Integrate DIAL into your TypeScript or JavaScript code."}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install dialai\n"})}),"\n",(0,t.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { createSession, runToCompletion } from 'dialai';\nimport machineDefinition from './machine.json';\n\nconst session = await createSession(machineDefinition);\nconst result = await runToCompletion(session.id);\n\nconsole.log('Final state:', result.currentState);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"core-functions",children:"Core Functions"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Function"}),(0,t.jsx)(n.th,{children:"Purpose"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"createSession"})}),(0,t.jsx)(n.td,{children:"Start a new decision process"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"getSession"})}),(0,t.jsx)(n.td,{children:"Check session state"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"getSessions"})}),(0,t.jsx)(n.td,{children:"List all active sessions"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"registerProposer"})}),(0,t.jsx)(n.td,{children:"Add a proposer to a session"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"registerVoter"})}),(0,t.jsx)(n.td,{children:"Add a voter to a session"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"submitProposal"})}),(0,t.jsx)(n.td,{children:"Submit a transition proposal"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"solicitProposal"})}),(0,t.jsx)(n.td,{children:"Ask a specialist to propose"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"submitVote"})}),(0,t.jsx)(n.td,{children:"Cast a vote"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"solicitVote"})}),(0,t.jsx)(n.td,{children:"Ask a specialist to vote"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"evaluateConsensus"})}),(0,t.jsx)(n.td,{children:"Check for agreement"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"executeTransition"})}),(0,t.jsx)(n.td,{children:"Apply the winning proposal"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"full-example",children:"Full Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import {\n  createSession,\n  registerProposer,\n  registerVoter,\n  solicitProposals,\n  solicitVotes,\n  evaluateConsensus,\n  executeTransition,\n  getSession\n} from 'dialai';\n\nasync function runMachine(machineDefinition: MachineDefinition) {\n  // 1. Create a session\n  const session = await createSession(machineDefinition);\n  console.log('Session created:', session.id);\n\n  // 2. Register specialists\n  await registerProposer(session.id, 'ai-proposer', {\n    strategy: 'llm',\n    config: { model: 'claude-sonnet-4-20250514' }\n  });\n\n  await registerVoter(session.id, 'human-voter', {\n    strategy: 'human'\n  });\n\n  // 3. Run decision cycles until goal\n  let current = await getSession(session.id);\n\n  while (current.status === 'active') {\n    // Solicit proposals from all proposers\n    const proposals = await solicitProposals(session.id);\n    console.log('Proposals:', proposals);\n\n    // Collect votes from all voters\n    const votes = await solicitVotes(session.id, proposals);\n    console.log('Votes:', votes);\n\n    // Check consensus\n    const result = await evaluateConsensus(session.id);\n\n    if (result.consensus) {\n      await executeTransition(session.id, result.winner);\n      console.log('Transitioned to:', result.winner.target);\n    }\n\n    current = await getSession(session.id);\n  }\n\n  return current;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"inspecting-sessions",children:"Inspecting Sessions"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { getSession } from 'dialai';\n\nconst session = await getSession(sessionId);\n\n// Session structure\n{\n  id: string;\n  machineId: string;\n  currentState: string;\n  status: 'active' | 'completed' | 'failed';\n  history: TransitionRecord[];\n  createdAt: string;\n  updatedAt: string;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"accessing-history",children:"Accessing History"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const session = await getSession(sessionId);\n\nfor (const record of session.history) {\n  console.log(`${record.fromState} -> ${record.toState}`);\n  console.log(`  Action: ${record.action}`);\n  console.log(`  Reasoning: ${record.reasoning}`);\n  console.log(`  Timestamp: ${record.timestamp}`);\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"custom-strategies",children:"Custom Strategies"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { registerProposer } from 'dialai';\n\n// Custom strategy function\nconst customStrategy = async (context) => {\n  const { currentState, availableTransitions, history } = context;\n\n  // Your logic here\n  const action = decideAction(availableTransitions);\n\n  return {\n    action: action.name,\n    target: action.target,\n    reasoning: 'Custom reasoning...'\n  };\n};\n\nawait registerProposer(sessionId, 'custom-proposer', {\n  strategy: 'custom',\n  config: { handler: customStrategy }\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { createSession, DIALError } from 'dialai';\n\ntry {\n  const session = await createSession(machineDefinition);\n} catch (error) {\n  if (error instanceof DIALError) {\n    console.error('DIAL error:', error.code, error.message);\n  } else {\n    throw error;\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"typescript-types",children:"TypeScript Types"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import type {\n  MachineDefinition,\n  Session,\n  Proposal,\n  Vote,\n  TransitionRecord,\n  ConsensusResult\n} from 'dialai';\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>a});var i=s(6540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);