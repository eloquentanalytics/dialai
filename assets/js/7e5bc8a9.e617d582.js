"use strict";(globalThis.webpackChunkdialai_website=globalThis.webpackChunkdialai_website||[]).push([[6865],{9061(e,s,n){n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guides/skills/troubleshooting/SKILL","title":"Troubleshooting","description":"Debug common DIAL issues. Use when something goes wrong during execution.","source":"@site/docs/guides/skills/troubleshooting/SKILL.md","sourceDirName":"guides/skills/troubleshooting","slug":"/guides/skills/troubleshooting/SKILL","permalink":"/dialai/docs/guides/skills/troubleshooting/SKILL","draft":false,"unlisted":false,"editUrl":"https://github.com/eloquentanalytics/dialai/tree/main/website/docs/guides/skills/troubleshooting/SKILL.md","tags":[],"version":"current","frontMatter":{"name":"dial-troubleshooting","description":"Debug common DIAL issues. Use when something goes wrong during execution."}}');var r=n(4848),l=n(8453);const o={name:"dial-troubleshooting",description:"Debug common DIAL issues. Use when something goes wrong during execution."},t="Troubleshooting",c={},d=[{value:"Quick Diagnostics",id:"quick-diagnostics",level:2},{value:"Common Errors",id:"common-errors",level:2},{value:"Machine Definition Invalid",id:"machine-definition-invalid",level:3},{value:"No Proposers Registered",id:"no-proposers-registered",level:3},{value:"Transition Not Available",id:"transition-not-available",level:3},{value:"Consensus Not Reached",id:"consensus-not-reached",level:3},{value:"API Key Errors",id:"api-key-errors",level:3},{value:"Session Completes Immediately",id:"session-completes-immediately",level:3},{value:"Human Prompts Not Appearing",id:"human-prompts-not-appearing",level:3},{value:"Debugging Strategies",id:"debugging-strategies",level:2},{value:"Verbose Mode",id:"verbose-mode",level:3},{value:"Inspect Session History",id:"inspect-session-history",level:3},{value:"Test with Deterministic Specialists",id:"test-with-deterministic-specialists",level:3},{value:"Check State Machine Graph",id:"check-state-machine-graph",level:3},{value:"Performance Issues",id:"performance-issues",level:2},{value:"Slow Execution",id:"slow-execution",level:3},{value:"High API Costs",id:"high-api-costs",level:3},{value:"Getting Help",id:"getting-help",level:2}];function a(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"troubleshooting",children:"Troubleshooting"})}),"\n",(0,r.jsx)(s.p,{children:"Diagnose and fix common DIAL issues."}),"\n",(0,r.jsx)(s.h2,{id:"quick-diagnostics",children:"Quick Diagnostics"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Validate machine JSON\ncat machine.json | jq .\n\n# Run with verbose output\nnpx dialai machine.json --verbose\n\n# Check environment\necho $ANTHROPIC_API_KEY\n"})}),"\n",(0,r.jsx)(s.h2,{id:"common-errors",children:"Common Errors"}),"\n",(0,r.jsx)(s.h3,{id:"machine-definition-invalid",children:"Machine Definition Invalid"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Error"}),": ",(0,r.jsx)(s.code,{children:"Machine definition invalid: missing required field"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Causes"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Malformed JSON syntax"}),"\n",(0,r.jsxs)(s.li,{children:["Missing required fields (",(0,r.jsx)(s.code,{children:"id"}),", ",(0,r.jsx)(s.code,{children:"defaultState"}),", ",(0,r.jsx)(s.code,{children:"states"}),")"]}),"\n",(0,r.jsx)(s.li,{children:"State references non-existent target"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Check JSON syntax\ncat machine.json | jq .\n\n# Verify structure\ncat machine.json | jq '.machine.states | keys'\n"})}),"\n",(0,r.jsx)(s.h3,{id:"no-proposers-registered",children:"No Proposers Registered"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Error"}),": ",(0,r.jsx)(s.code,{children:"No proposers registered for session"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause"}),": Machine definition has empty ",(0,r.jsx)(s.code,{children:"specialists.proposers"})," array."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),": Add at least one proposer:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "specialists": {\n    "proposers": [\n      { "id": "default", "strategy": "llm", "config": { "model": "claude-sonnet-4-20250514" } }\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(s.h3,{id:"transition-not-available",children:"Transition Not Available"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Error"}),": ",(0,r.jsx)(s.code,{children:"Transition 'approve' not available from state 'draft'"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause"}),": Proposed action doesn't exist on current state."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),": Check available transitions:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"cat machine.json | jq '.machine.states.draft.transitions | keys'\n"})}),"\n",(0,r.jsx)(s.h3,{id:"consensus-not-reached",children:"Consensus Not Reached"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Symptom"}),": Cycle repeats without progress."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Causes"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Voters disagree and no majority forms"}),"\n",(0,r.jsx)(s.li,{children:"Threshold too high for voter count"}),"\n",(0,r.jsx)(s.li,{children:"All voters returning NEITHER"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Lower threshold: ",(0,r.jsx)(s.code,{children:'"threshold": 0.5'})]}),"\n",(0,r.jsx)(s.li,{children:"Add more voters"}),"\n",(0,r.jsx)(s.li,{children:"Check voter prompts for clarity"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"api-key-errors",children:"API Key Errors"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Error"}),": ",(0,r.jsx)(s.code,{children:"ANTHROPIC_API_KEY not set"})," or ",(0,r.jsx)(s.code,{children:"Invalid API key"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"export ANTHROPIC_API_KEY=sk-ant-...\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Or in ",(0,r.jsx)(s.code,{children:".env"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"ANTHROPIC_API_KEY=sk-ant-...\n"})}),"\n",(0,r.jsx)(s.h3,{id:"session-completes-immediately",children:"Session Completes Immediately"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Symptom"}),": Machine runs but exits in one cycle."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Causes"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Deterministic specialist auto-approves"}),"\n",(0,r.jsx)(s.li,{children:"Initial state has transition directly to goal"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Remove deterministic specialists for real runs"}),"\n",(0,r.jsx)(s.li,{children:"Add intermediate states"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"human-prompts-not-appearing",children:"Human Prompts Not Appearing"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Symptom"}),": Human specialist configured but no prompts shown."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Cause"}),": Missing ",(0,r.jsx)(s.code,{children:"--human"})," flag."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fix"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"npx dialai machine.json --human\n"})}),"\n",(0,r.jsx)(s.h2,{id:"debugging-strategies",children:"Debugging Strategies"}),"\n",(0,r.jsx)(s.h3,{id:"verbose-mode",children:"Verbose Mode"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"npx dialai machine.json --verbose\n"})}),"\n",(0,r.jsx)(s.p,{children:"Shows:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Each proposal submitted"}),"\n",(0,r.jsx)(s.li,{children:"Each vote cast"}),"\n",(0,r.jsx)(s.li,{children:"Consensus evaluation"}),"\n",(0,r.jsx)(s.li,{children:"Transition execution"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"inspect-session-history",children:"Inspect Session History"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"import { getSession } from 'dialai';\n\nconst session = await getSession(sessionId);\nconsole.log(JSON.stringify(session.history, null, 2));\n"})}),"\n",(0,r.jsx)(s.h3,{id:"test-with-deterministic-specialists",children:"Test with Deterministic Specialists"}),"\n",(0,r.jsx)(s.p,{children:"Replace LLM specialists with deterministic ones for predictable behavior:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "specialists": {\n    "proposers": [\n      { "id": "test", "strategy": "deterministic", "config": { "action": "approve" } }\n    ],\n    "voters": [\n      { "id": "test-voter", "strategy": "deterministic", "config": { "choice": "A" } }\n    ]\n  }\n}\n'})}),"\n",(0,r.jsx)(s.h3,{id:"check-state-machine-graph",children:"Check State Machine Graph"}),"\n",(0,r.jsx)(s.p,{children:"Visualize your machine:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"cat machine.json | jq '.machine.states | to_entries | .[] | \"\\(.key) -> \\(.value.transitions // {} | keys)\"'\n"})}),"\n",(0,r.jsx)(s.h2,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,r.jsx)(s.h3,{id:"slow-execution",children:"Slow Execution"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Causes"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Large number of voters (pairwise voting is O(n^2))"}),"\n",(0,r.jsx)(s.li,{children:"Slow API responses"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fixes"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Reduce voter count"}),"\n",(0,r.jsx)(s.li,{children:"Use faster models for non-critical votes"}),"\n",(0,r.jsx)(s.li,{children:"Add timeout configuration"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"high-api-costs",children:"High API Costs"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Causes"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Using expensive models for all specialists"}),"\n",(0,r.jsx)(s.li,{children:"Too many decision cycles"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fixes"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Use cheaper models for routine decisions"}),"\n",(0,r.jsxs)(s.li,{children:["Add ",(0,r.jsx)(s.code,{children:"maxCycles"})," limit"]}),"\n",(0,r.jsx)(s.li,{children:"Tune consensus threshold"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Check the ",(0,r.jsx)(s.a,{href:"/docs/api/createSession",children:"API Reference"})]}),"\n",(0,r.jsxs)(s.li,{children:["Review ",(0,r.jsx)(s.a,{href:"/docs/examples/intro",children:"example machines"})]}),"\n",(0,r.jsx)(s.li,{children:"Open an issue on GitHub"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,s,n){n.d(s,{R:()=>o,x:()=>t});var i=n(6540);const r={},l=i.createContext(r);function o(e){const s=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(l.Provider,{value:s},e.children)}}}]);