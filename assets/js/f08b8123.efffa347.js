"use strict";(globalThis.webpackChunkdialai_website=globalThis.webpackChunkdialai_website||[]).push([[4719],{5699(e,n,i){i.r(n),i.d(n,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"examples/intro","title":"Examples","description":"This section contains example implementations demonstrating DialAI usage.","source":"@site/docs/examples/intro.md","sourceDirName":"examples","slug":"/examples/intro","permalink":"/dialai/docs/examples/intro","draft":false,"unlisted":false,"editUrl":"https://github.com/eloquentanalytics/dialai/tree/main/website/docs/examples/intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"API Reference","permalink":"/dialai/docs/api/intro"}}');var t=i(4848),a=i(8453);const o={sidebar_position:1},r="Examples",p={},c=[{value:"Simple Machine",id:"simple-machine",level:2},{value:"Programmatic Usage",id:"programmatic-usage",level:2},{value:"Multi-Step Machine",id:"multi-step-machine",level:2},{value:"Custom Specialists Example",id:"custom-specialists-example",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"examples",children:"Examples"})}),"\n",(0,t.jsx)(n.p,{children:"This section contains example implementations demonstrating DialAI usage."}),"\n",(0,t.jsx)(n.h2,{id:"simple-machine",children:"Simple Machine"}),"\n",(0,t.jsxs)(n.p,{children:["The repository includes a minimal example at ",(0,t.jsx)(n.code,{children:"examples/simple-machine.json"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "machineName": "simple-task",\n  "initialState": "pending",\n  "defaultState": "done",\n  "states": {\n    "pending": {\n      "prompt": "Should we complete this task?",\n      "transitions": { "complete": "done" }\n    },\n    "done": {}\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Run it with the CLI:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"node dist/dialai/cli.js examples/simple-machine.json\n"})}),"\n",(0,t.jsx)(n.p,{children:"Output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Machine:       simple-task\nInitial state: pending\nGoal state:    done\nFinal state:   done\nSession ID:    a1b2c3d4-...\n"})}),"\n",(0,t.jsx)(n.h2,{id:"programmatic-usage",children:"Programmatic Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import { runSession } from "dialai";\nimport type { MachineDefinition } from "dialai";\n\nconst machine: MachineDefinition = {\n  machineName: "simple-task",\n  initialState: "pending",\n  defaultState: "done",\n  states: {\n    pending: {\n      prompt: "Should we complete this task?",\n      transitions: { complete: "done" },\n    },\n    done: {},\n  },\n};\n\nconst session = await runSession(machine);\nconsole.log(session.currentState); // "done"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"multi-step-machine",children:"Multi-Step Machine"}),"\n",(0,t.jsx)(n.p,{children:"A 3-state machine that requires 2 cycles to reach the goal:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'const pipeline: MachineDefinition = {\n  machineName: "pipeline",\n  initialState: "queued",\n  defaultState: "complete",\n  states: {\n    queued: {\n      prompt: "Start processing?",\n      transitions: { start: "processing" },\n    },\n    processing: {\n      prompt: "Processing complete. Finalize?",\n      transitions: { finalize: "complete" },\n    },\n    complete: {},\n  },\n};\n\nconst session = await runSession(pipeline);\n// queued \u2192 processing \u2192 complete\n'})}),"\n",(0,t.jsx)(n.h2,{id:"custom-specialists-example",children:"Custom Specialists Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import {\n  createSession,\n  registerProposer,\n  registerVoter,\n  solicitProposal,\n  solicitVote,\n  evaluateConsensus,\n  executeTransition,\n  clear,\n} from "dialai";\nimport type { MachineDefinition } from "dialai";\n\nclear(); // Reset state\n\nconst machine: MachineDefinition = {\n  machineName: "review",\n  initialState: "pending",\n  defaultState: "approved",\n  states: {\n    pending: {\n      transitions: {\n        approve: "approved",\n        reject: "rejected",\n        revise: "pending",\n      },\n    },\n    approved: {},\n    rejected: {},\n  },\n};\n\n// Two proposers that disagree\nregisterProposer({\n  specialistId: "optimist",\n  machineName: "review",\n  strategyFn: async (ctx) => ({\n    transitionName: "approve",\n    toState: "approved",\n    reasoning: "Looks good to me",\n  }),\n});\n\nregisterProposer({\n  specialistId: "pessimist",\n  machineName: "review",\n  strategyFn: async (ctx) => ({\n    transitionName: "reject",\n    toState: "rejected",\n    reasoning: "Needs more work",\n  }),\n});\n\n// A voter that prefers approval\nregisterVoter({\n  specialistId: "tiebreaker",\n  machineName: "review",\n  strategyFn: async (ctx) => {\n    if (ctx.proposalA.toState === "approved") return { voteFor: "A", reasoning: "Approve" };\n    if (ctx.proposalB.toState === "approved") return { voteFor: "B", reasoning: "Approve" };\n    return { voteFor: "NEITHER", reasoning: "Neither approves" };\n  },\n});\n\nconst session = createSession(machine);\n\n// Solicit from both proposers\nconst p1 = await solicitProposal(session.sessionId, "optimist");\nconst p2 = await solicitProposal(session.sessionId, "pessimist");\n\n// Solicit vote\nawait solicitVote(session.sessionId, "tiebreaker", p1.proposalId, p2.proposalId);\n\n// Evaluate and execute\nconst result = evaluateConsensus(session.sessionId);\nif (result.consensusReached && result.winningProposalId) {\n  const winner = [p1, p2].find((p) => p.proposalId === result.winningProposalId)!;\n  executeTransition(session.sessionId, winner.transitionName, winner.toState, result.reasoning);\n}\n\nconsole.log(session.currentState); // "approved"\n'})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>r});var s=i(6540);const t={},a=s.createContext(t);function o(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);