"use strict";(globalThis.webpackChunkdialai_website=globalThis.webpackChunkdialai_website||[]).push([[2703],{2302(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"guides/proxy-mode","title":"Proxy Mode","description":"DIAL supports running as an HTTP server or forwarding requests to a remote DIAL instance. This enables distributed deployments where a central DIAL server handles all state machine execution.","source":"@site/docs/guides/proxy-mode.md","sourceDirName":"guides","slug":"/guides/proxy-mode","permalink":"/dialai/docs/guides/proxy-mode","draft":false,"unlisted":false,"editUrl":"https://github.com/eloquentanalytics/dialai/tree/main/website/docs/guides/proxy-mode.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Implementing Strategies","permalink":"/dialai/docs/guides/implementing-strategies"},"next":{"title":"API Reference","permalink":"/dialai/docs/api/intro"}}');var i=r(4848),t=r(8453);const a={sidebar_position:5},l="Proxy Mode",d={},o=[{value:"Environment Variables",id:"environment-variables",level:2},{value:"Running as an HTTP Server",id:"running-as-an-http-server",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Running as a Proxy Client",id:"running-as-a-proxy-client",level:2},{value:"MCP Proxy Mode",id:"mcp-proxy-mode",level:3},{value:"Deployment Patterns",id:"deployment-patterns",level:2},{value:"Centralized Server",id:"centralized-server",level:3},{value:"MCP Gateway",id:"mcp-gateway",level:3},{value:"Security Considerations",id:"security-considerations",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"proxy-mode",children:"Proxy Mode"})}),"\n",(0,i.jsx)(n.p,{children:"DIAL supports running as an HTTP server or forwarding requests to a remote DIAL instance. This enables distributed deployments where a central DIAL server handles all state machine execution."}),"\n",(0,i.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DIALAI_BASE_URL"})}),(0,i.jsx)(n.td,{children:"Forward all requests to remote MCP server at this URL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DIALAI_PORT"})}),(0,i.jsx)(n.td,{children:"Port to expose HTTP endpoint (for acting as remote server)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DIALAI_API_TOKEN"})}),(0,i.jsx)(n.td,{children:"Auth token (sent as Bearer token, validated on receive)"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"running-as-an-http-server",children:"Running as an HTTP Server"}),"\n",(0,i.jsx)(n.p,{children:"Start the MCP server with an HTTP endpoint exposed:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"DIALAI_PORT=3000 DIALAI_API_TOKEN=secret dialai-mcp\n"})}),"\n",(0,i.jsx)(n.p,{children:"This starts both:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The standard stdio MCP transport (for local MCP clients)"}),"\n",(0,i.jsx)(n.li,{children:"An HTTP server on port 3000 (for remote clients)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The HTTP server implements the MCP Streamable HTTP transport specification, supporting both SSE streaming and direct HTTP responses."}),"\n",(0,i.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,i.jsxs)(n.p,{children:["When ",(0,i.jsx)(n.code,{children:"DIALAI_API_TOKEN"})," is set, all HTTP requests must include a Bearer token:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Authorization: Bearer secret\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Requests without a valid token receive a ",(0,i.jsx)(n.code,{children:"401 Unauthorized"})," response."]}),"\n",(0,i.jsx)(n.h2,{id:"running-as-a-proxy-client",children:"Running as a Proxy Client"}),"\n",(0,i.jsx)(n.p,{children:"Forward all tool calls to a remote DIAL server:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"DIALAI_BASE_URL=http://server:3000 DIALAI_API_TOKEN=secret dialai examples/simple-machine.json\n"})}),"\n",(0,i.jsx)(n.p,{children:"The CLI will connect to the remote server and execute the session there instead of locally."}),"\n",(0,i.jsx)(n.h3,{id:"mcp-proxy-mode",children:"MCP Proxy Mode"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"dialai-mcp"})," server can also forward tool calls to a remote server:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"DIALAI_BASE_URL=http://server:3000 DIALAI_API_TOKEN=secret dialai-mcp\n"})}),"\n",(0,i.jsx)(n.p,{children:"In this mode, the local MCP server acts as a proxy\u2014receiving tool calls via stdio and forwarding them to the remote HTTP server."}),"\n",(0,i.jsx)(n.h2,{id:"deployment-patterns",children:"Deployment Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"centralized-server",children:"Centralized Server"}),"\n",(0,i.jsx)(n.p,{children:"Run a single DIAL server that multiple clients connect to:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     HTTP      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Client A   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502   DIAL      \u2502\n                              \u2502   Server    \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     HTTP      \u2502             \u2502\n\u2502  Client B   \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.p,{children:"Server:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"DIALAI_PORT=3000 DIALAI_API_TOKEN=shared-secret dialai-mcp\n"})}),"\n",(0,i.jsx)(n.p,{children:"Clients:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"DIALAI_BASE_URL=http://server:3000 DIALAI_API_TOKEN=shared-secret dialai machine.json\n"})}),"\n",(0,i.jsx)(n.h3,{id:"mcp-gateway",children:"MCP Gateway"}),"\n",(0,i.jsx)(n.p,{children:"Use a local MCP server as a gateway to a remote DIAL instance:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    stdio     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    HTTP     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Claude     \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502  Local MCP  \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502   Remote    \u2502\n\u2502  Desktop    \u2502              \u2502   Proxy     \u2502             \u2502   Server    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518              \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.p,{children:"Remote server:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"DIALAI_PORT=3000 DIALAI_API_TOKEN=secret dialai-mcp\n"})}),"\n",(0,i.jsx)(n.p,{children:"Local proxy (configured in Claude Desktop):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "dialai": {\n      "command": "dialai-mcp",\n      "env": {\n        "DIALAI_BASE_URL": "http://remote-server:3000",\n        "DIALAI_API_TOKEN": "secret"\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Always use ",(0,i.jsx)(n.code,{children:"DIALAI_API_TOKEN"})," in production to prevent unauthorized access"]}),"\n",(0,i.jsx)(n.li,{children:"Use HTTPS in production (place behind a reverse proxy like nginx or Caddy)"}),"\n",(0,i.jsx)(n.li,{children:"The token is transmitted as a Bearer token in the Authorization header"}),"\n",(0,i.jsx)(n.li,{children:"Consider network-level security (VPN, private networks) for sensitive deployments"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,r){r.d(n,{R:()=>a,x:()=>l});var s=r(6540);const i={},t=s.createContext(i);function a(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);